<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        // 传统
        var performaceS = function () { }

        performaceS.prototype.calculate = function (salary) {
            return salary * 4
        }

        var performaceA = function () { }

        performaceA.prototype.calculate = function (salary) {
            return salary * 3
        }

        var performaceB = function () { }

        performaceB.prototype.calculate = function (salary) {
            return salary * 2
        }

        var Bonus = function () {
            this.salary = null;
            this.strategy = null;
        }

        Bonus.prototype.setSalary = function (salary) {
            this.salary = salary;
        }

        Bonus.prototype.setStrategy = function (strategy) {
            this.strategy = strategy;
        }

        Bonus.prototype.getSalary = function () {
            if (!this.strategy) {
                throw new Error('no strategy')
            }
            return this.strategy.calculate(this.salary);
        }

        var bonus = new Bonus();

        bonus.setSalary(1000);
        bonus.setStrategy(new performaceA());

        console.log(bonus.getSalary());

        bonus.setStrategy(new performaceS());
        console.log(bonus.getSalary());


    </script>
</body>

</html>